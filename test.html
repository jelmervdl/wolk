<script src="wolk.js"></script>
<script>

window.x = new Storage('test');

var _api_key = function() {
	return localStorage['__api_key'];
}

var _api_url = function() {
	return localStorage['__api_url'];
}

var _load = function() {
	document.getElementById('api_key').value = localStorage['__api_key'] || '';
	document.getElementById('api_url').value = localStorage['__api_url'] || document.location.href.replace('test.html', 'sync.php');
}

var _apply = function() {
	localStorage['__api_key'] = document.getElementById('api_key').value;
	localStorage['__api_url'] = document.getElementById('api_url').value;
}

var _sync = function() {
	var forceComplete = document.getElementById('force_complete').checked;
	console.log(forceComplete, x.synchronize(forceComplete));
}

window.onload = _load;

</script>
<style>
	.prefs input {
		float: left;
		width: 300px;
	}
	
	.prefs label {
		float: left;
		width: 150px;
		text-align: right;
		padding-right: 10px;
	}
	
	.prefs input, .prefs label {
		font: 16px/20px Helvetica;
	}
	
	br {
		clear: both;
	}
</style>
<section>
	<fieldset class="prefs">
		<legend>Sync Preferences</legend>
		<label for="api_key">API Key</label>
		<input type="text" id="api_key">
		<br>
		<label for="api_url">API URL</label>
		<input type="text" id="api_url">
		<br>
		<button onclick="_apply()">Apply</button>
		<button onclick="_load()">Cancel</button>
	</fieldset>
	<fieldset>
		<button onclick="_sync()">Storage.synchronize()</button>
		<input type="checkbox" id="force_complete">
		<label for="force_complete">Force Complete Sync</label>
	</fieldset>
</section>
